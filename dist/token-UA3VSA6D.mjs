"use client";
import{a as _,b as k}from"./chunk-T5RAIG6J.mjs";import{e as l}from"./chunk-24KXR4MQ.mjs";var h=l((y,s)=>{var c=Object.defineProperty,f=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,u=(e,r)=>{for(var o in r)c(e,o,{get:r[o],enumerable:!0})},v=(e,r,o,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of O(r))!d.call(e,i)&&i!==o&&c(e,i,{get:()=>r[i],enumerable:!(n=f(r,i))||n.enumerable});return e},T=e=>v(c({},"__esModule",{value:!0}),e),p={};u(p,{refreshToken:()=>w});s.exports=T(p);var a=_(),t=k();async function w(){let{projectId:e,teamId:r}=(0,t.findProjectInfo)(),o=(0,t.loadToken)(e);if(!o||(0,t.isExpired)((0,t.getTokenPayload)(o.token))){let n=(0,t.getVercelCliToken)();if(!n)throw new a.VercelOidcTokenError("Failed to refresh OIDC token: login to vercel cli");if(!e)throw new a.VercelOidcTokenError("Failed to refresh OIDC token: project id not found");if(o=await(0,t.getVercelOidcToken)(n,e,r),!o)throw new a.VercelOidcTokenError("Failed to refresh OIDC token");(0,t.saveToken)(o,e)}process.env.VERCEL_OIDC_TOKEN=o.token}});export default h();
